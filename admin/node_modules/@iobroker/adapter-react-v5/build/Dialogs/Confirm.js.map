{"version":3,"file":"Confirm.js","sourceRoot":"./src/","sources":["Dialogs/Confirm.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright 2019-2024 Denis Haev (bluefox) <dogafox@gmail.com>\n *\n * MIT License\n *\n */\n\n// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\nimport React, { Component, type JSX } from 'react';\n\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    FormControlLabel,\n    Checkbox,\n} from '@mui/material';\n\nimport { Check as IconCheck, Close as IconClose } from '@mui/icons-material';\n\nimport { I18n } from '../i18n';\n\nconst styles: Record<string, React.CSSProperties> = {\n    suppress: {\n        fontSize: 12,\n    },\n    suppressRoot: {\n        // it is sx\n        marginTop: '16px',\n    },\n};\n\ninterface DialogConfirmProps {\n    /** The dialog title; default: Are you sure? (translated) */\n    title?: string;\n    /** The dialog text */\n    text?: string | React.JSX.Element | React.JSX.Element[];\n    /** Close handler. */\n    onClose?: (ok: boolean) => void;\n    /** if the dialog must be fill sized */\n    fullWidth?: boolean;\n    /** optional icon */\n    icon?: React.JSX.Element;\n    /** optional ok button text */\n    ok?: string;\n    /** optional cancel button text */\n    cancel?: string;\n    /** optional interval in minutes for which the confirmation dialog will be suppressed if activated. */\n    suppressQuestionMinutes?: number;\n    /** optional text for the suppression checkbox */\n    suppressText?: string;\n    /** optional name of the dialog. Used only with suppressQuestionMinutes to store the user choice */\n    dialogName?: string;\n}\n\ninterface DialogConfirmState {\n    suppress: number | boolean;\n}\n\nexport class DialogConfirm extends Component<DialogConfirmProps, DialogConfirmState> {\n    constructor(props: DialogConfirmProps) {\n        super(props);\n\n        if (!this.props.dialogName && this.props.suppressQuestionMinutes) {\n            throw new Error('dialogName required if suppressQuestionMinutes used');\n        }\n        let suppress: number | boolean = false;\n\n        if (this.props.suppressQuestionMinutes) {\n            suppress =\n                parseInt(((window as any)._localStorage || window.localStorage).getItem(this.props.dialogName), 10) ||\n                0;\n\n            if (!suppress) {\n                suppress = false;\n            } else if (Date.now() > suppress) {\n                ((window as any)._localStorage || window.localStorage).removeItem(this.props.dialogName);\n                suppress = false;\n            }\n        }\n\n        this.state = {\n            suppress,\n        };\n    }\n\n    handleOk(): void {\n        if (this.state.suppress) {\n            ((window as any)._localStorage || window.localStorage).setItem(\n                this.props.dialogName,\n                Date.now() + (this.props.suppressQuestionMinutes || 2) * 60000,\n            );\n        }\n        if (this.props.onClose) {\n            this.props.onClose(true);\n        }\n    }\n\n    handleCancel(): void {\n        if (this.props.onClose) {\n            this.props.onClose(false);\n        }\n    }\n\n    render(): JSX.Element | null {\n        if (typeof this.state.suppress === 'number') {\n            setTimeout(() => this.props.onClose && this.props.onClose(true), 100);\n            return null;\n        }\n\n        return (\n            <Dialog\n                open={!0}\n                maxWidth=\"md\"\n                fullWidth={this.props.fullWidth !== undefined ? this.props.fullWidth : true}\n                onClose={(event, reason) => {\n                    if (reason !== 'backdropClick' && reason !== 'escapeKeyDown') {\n                        this.handleCancel();\n                    }\n                }}\n                aria-labelledby=\"ar_confirmation_dialog_title\"\n                aria-describedby=\"ar_confirmation_dialog_description\"\n            >\n                <DialogTitle id=\"ar_confirmation_dialog_title\">\n                    {this.props.title || I18n.t('ra_Are you sure?')}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"ar_confirmation_dialog_description\">\n                        {this.props.icon || null}\n                        {this.props.text}\n                        {this.props.suppressQuestionMinutes ? <br /> : null}\n                        {this.props.suppressQuestionMinutes ? (\n                            <FormControlLabel\n                                sx={{\n                                    '& .FormControlLabel-label': styles.suppress,\n                                    '&.FormControlLabel-root': styles.suppressRoot,\n                                }}\n                                control={\n                                    <Checkbox\n                                        id={`ar_dialog_confirm_suppress_${this.props.dialogName || ''}`}\n                                        checked={!!this.state.suppress}\n                                        onChange={() => this.setState({ suppress: !this.state.suppress })}\n                                    />\n                                }\n                                label={\n                                    this.props.suppressText ||\n                                    I18n.t(\n                                        'ra_Suppress question for next %s minutes',\n                                        (this.props.suppressQuestionMinutes || 2).toString(),\n                                    )\n                                }\n                            />\n                        ) : null}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        id={`ar_dialog_confirm_ok_${this.props.dialogName || ''}`}\n                        variant=\"contained\"\n                        onClick={() => this.handleOk()}\n                        color=\"primary\"\n                        autoFocus\n                        startIcon={<IconCheck />}\n                    >\n                        {this.props.ok || I18n.t('ra_Ok')}\n                    </Button>\n                    <Button\n                        id={`ar_dialog_confirm_cancel_${this.props.dialogName || ''}`}\n                        variant=\"contained\"\n                        onClick={() => this.handleCancel()}\n                        color=\"grey\"\n                        startIcon={<IconClose />}\n                    >\n                        {this.props.cancel || I18n.t('ra_Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n"]}