{"version":3,"file":"Router.js","sourceRoot":"./src/","sources":["Components/Router.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component } from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport class Router<P = {}, S = {}> extends Component<P, S> {\n    protected onHashChangedBound: () => void;\n\n    constructor(props: P) {\n        super(props);\n        this.onHashChangedBound = this.onHashChanged.bind(this);\n    }\n\n    componentDidMount(): void {\n        window.addEventListener('hashchange', this.onHashChangedBound);\n    }\n\n    componentWillUnmount(): void {\n        window.removeEventListener('hashchange', this.onHashChangedBound);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    onHashChanged(): void {\n        // override this function\n    }\n\n    /**\n     * Gets the location object.\n     */\n    static getLocation(): { tab: string; dialog: string; id: string; arg: string } {\n        let hash = window.location.hash;\n        hash = hash.replace(/^#/, '');\n        const parts = hash.split('/').map(item => {\n            try {\n                return item ? decodeURIComponent(item) : '';\n            } catch {\n                console.error(`Router: Cannot decode ${item}`);\n                return item;\n            }\n        });\n        // #tabName/dialogName/deviceId\n        return {\n            tab: parts[0] || '',\n            dialog: parts[1] || '',\n            id: parts[2] || '',\n            arg: parts[3] || '',\n        };\n    }\n\n    /**\n     * Navigate to a new location. Any parameters that are not set will be taken from the current location.\n     */\n    static doNavigate(\n        tab: string | undefined | null,\n        dialog?: string | null,\n        id?: string | null,\n        arg?: string | null,\n    ): void {\n        let hash = '';\n        const location = Router.getLocation();\n        if (arg !== undefined && !id) {\n            id = location.id;\n        }\n        if (id && !dialog) {\n            dialog = location.dialog;\n        }\n        if (dialog && !tab) {\n            tab = location.tab;\n        } else if (tab === null) {\n            tab = location.tab;\n        }\n\n        if (tab) {\n            hash = `#${tab}`;\n            if (dialog) {\n                hash += `/${dialog}`;\n\n                if (id) {\n                    hash += `/${id}`;\n                    if (arg !== undefined) {\n                        hash += `/${arg}`;\n                    }\n                }\n            }\n        }\n        if (window.location.hash !== hash) {\n            window.location.hash = hash;\n        }\n    }\n}\n"]}