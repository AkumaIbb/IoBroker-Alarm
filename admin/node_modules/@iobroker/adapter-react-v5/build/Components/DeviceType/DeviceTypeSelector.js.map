{"version":3,"file":"DeviceTypeSelector.js","sourceRoot":"./src/","sources":["Components/DeviceType/DeviceTypeSelector.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Box, FormControl, InputLabel, MenuItem, Select } from '@mui/material';\n\nimport { Types } from '@iobroker/type-detector';\n\nimport { I18n } from '../../i18n';\nimport { Icon } from '../Icon';\nimport type { ThemeType } from '../../types';\n\nimport { DeviceTypeIcon } from './DeviceTypeIcon';\nimport { extendDeviceTypeTranslation } from './deviceTypeTranslations';\n\nconst styles: Record<\n    'itemChildrenWrapper' | 'type' | 'selectIcon' | 'selectText' | 'iconWrapper' | 'iconStyle' | 'emptyIcon',\n    React.CSSProperties\n> = {\n    itemChildrenWrapper: {\n        display: 'flex',\n        width: '100%',\n        justifyContent: 'space-between',\n    },\n    type: {\n        marginTop: 10,\n    },\n    selectIcon: {\n        paddingRight: 8,\n        verticalAlign: 'middle',\n        width: 20,\n        height: 20,\n    },\n    selectText: {\n        verticalAlign: 'middle',\n    },\n    iconWrapper: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    iconStyle: {\n        width: 16,\n        height: 16,\n        margin: '0 3px',\n    },\n    emptyIcon: {\n        width: 16,\n        height: 16,\n        margin: '0 3px',\n    },\n};\n\nexport function DeviceTypeSelector(props: {\n    themeType: ThemeType;\n    supportedDevices?: Types[];\n    unsupportedDevices?: Types[];\n    value?: Types | '';\n    onChange: (value: Types) => void;\n    label?: string;\n    style?: React.CSSProperties;\n    sx?: Record<string, any>;\n    disabled?: boolean;\n    error?: boolean;\n    /** Show icons for applications: google, amazon, material, alias. Used in devices */\n    showApplications?: {\n        TYPE_OPTIONS: Partial<Record<Types, Record<string, boolean>>>;\n        ICONS_TYPE: Record<string, React.JSX.Element>;\n    };\n}): React.JSX.Element {\n    const [typesWords, setTypesWords] = React.useState<Partial<Record<Types, string>>>({});\n    const [types, setTypes] = React.useState<Types[] | null>([]);\n\n    useEffect(() => {\n        const _typesWords: Partial<Record<Types, string>> = {};\n        Object.keys(Types)\n            .filter(\n                id =>\n                    (!props.supportedDevices || props.supportedDevices?.includes(id as Types)) &&\n                    !props.unsupportedDevices?.includes(id as Types),\n            )\n            .forEach(typeId => (_typesWords[typeId as Types] = I18n.t(`type-${Types[typeId as Types]}`)));\n\n        // sort types by ABC in the current language\n        const _types: Types[] = Object.keys(_typesWords) as Types[];\n\n        _types.sort((a, b) => {\n            if (_typesWords[a] === _typesWords[b]) {\n                return 0;\n            }\n            return _typesWords[a].localeCompare(_typesWords[b], 'de');\n        });\n\n        extendDeviceTypeTranslation();\n\n        setTypes(_types);\n        setTypesWords(_typesWords);\n    }, [props.supportedDevices, props.unsupportedDevices]);\n\n    if (!types) {\n        return (\n            <Box\n                style={{\n                    ...styles.type,\n                    ...props.style,\n                }}\n                sx={props.sx}\n            />\n        );\n    }\n\n    return (\n        <FormControl\n            style={{\n                ...styles.type,\n                ...props.style,\n            }}\n            sx={props.sx}\n            variant=\"standard\"\n            error={!!props.error}\n        >\n            <InputLabel>{props.label || I18n.t('type-Device type')}</InputLabel>\n            <Select\n                variant=\"standard\"\n                disabled={!!props.disabled}\n                value={props.value}\n                onChange={e => props.onChange(e.target.value as Types)}\n            >\n                {types.map(typeId => (\n                    <MenuItem\n                        key={Types[typeId]}\n                        value={Types[typeId]}\n                    >\n                        <div style={styles.itemChildrenWrapper}>\n                            <div>\n                                <DeviceTypeIcon\n                                    type={Types[typeId]}\n                                    style={{\n                                        ...styles.selectIcon,\n                                        color: props.themeType === 'dark' ? '#FFFFFF' : '#000',\n                                    }}\n                                />\n                                <span style={styles.selectText}>{typesWords[typeId]}</span>\n                            </div>\n                            {props.showApplications?.TYPE_OPTIONS[typeId] ? (\n                                <div style={styles.iconWrapper}>\n                                    {Object.keys(props.showApplications.TYPE_OPTIONS[typeId]).map(key =>\n                                        props.showApplications.TYPE_OPTIONS[typeId][key] ? (\n                                            <Icon\n                                                key={key}\n                                                style={styles.iconStyle}\n                                                src={props.showApplications.ICONS_TYPE[key]}\n                                            />\n                                        ) : (\n                                            <div\n                                                key={key}\n                                                style={styles.emptyIcon}\n                                            />\n                                        ),\n                                    )}\n                                </div>\n                            ) : null}\n                        </div>\n                    </MenuItem>\n                ))}\n            </Select>\n        </FormControl>\n    );\n}\n"]}