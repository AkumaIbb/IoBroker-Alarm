{"version":3,"file":"SaveCloseButtons.js","sourceRoot":"./src/","sources":["Components/SaveCloseButtons.tsx"],"names":[],"mappings":"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","sourcesContent":["// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\nimport React, { type JSX } from 'react';\n\nimport { Fab, Toolbar } from '@mui/material';\n\nimport { Save as IconSave, Close as IconClose } from '@mui/icons-material';\n\nimport { I18n } from '../i18n';\nimport type { IobTheme } from '../types';\n\nconst styles: Record<string, React.CSSProperties> = {\n    buttonIcon: {\n        marginRight: 8,\n    },\n};\n\ninterface SaveCloseButtonsProps {\n    /* Are the buttons without text */\n    noTextOnButtons?: boolean;\n    /* Theme object (from this.state.theme) */\n    theme: IobTheme;\n    /* bottom position 0 or 38 for iFrame */\n    isIFrame?: boolean;\n    /* is used in new React */\n    newReact?: boolean;\n    /* on Save handler */\n    onSave: (close: boolean) => void;\n    /* on Close handler */\n    onClose: () => void;\n    dense?: boolean;\n    paddingLeft?: number;\n    changed: boolean;\n    error?: boolean;\n}\n\nexport class SaveCloseButtons extends React.Component<SaveCloseButtonsProps> {\n    private readonly isIFrame: boolean;\n\n    constructor(props: SaveCloseButtonsProps) {\n        super(props);\n        const newReact = props.newReact === undefined ? true : props.newReact;\n\n        if (props.isIFrame !== undefined) {\n            this.isIFrame = props.isIFrame;\n        } else {\n            try {\n                this.isIFrame = !newReact && window.self !== window.top;\n            } catch {\n                this.isIFrame = !newReact;\n            }\n        }\n    }\n\n    render(): JSX.Element {\n        const noTextOnButtons = this.props.noTextOnButtons;\n        const buttonStyle: React.CSSProperties = {\n            borderRadius: this.props.theme.saveToolbar.button.borderRadius || 3,\n            height: this.props.theme.saveToolbar.button.height || 32,\n        };\n\n        const style: React.CSSProperties = {\n            bottom: this.isIFrame ? 38 : 0,\n            left: this.props.paddingLeft || 0,\n            right: 0,\n            position: 'absolute',\n            background: this.props.theme.saveToolbar.background,\n        };\n        if (this.props.dense) {\n            style.minHeight = 48;\n        }\n\n        if (this.props.error) {\n            buttonStyle.border = '1px solid red';\n        }\n\n        return (\n            <Toolbar\n                // position=\"absolute\"\n                style={style}\n            >\n                <Fab\n                    variant=\"extended\"\n                    aria-label=\"Save\"\n                    disabled={!this.props.changed || this.props.error}\n                    onClick={() => this.props.onSave(false)}\n                    style={buttonStyle}\n                >\n                    <IconSave style={!noTextOnButtons ? styles.buttonIcon : undefined} />\n                    {!noTextOnButtons && I18n.t('ra_Save')}\n                </Fab>\n                <Fab\n                    variant=\"extended\"\n                    aria-label=\"Save and close\"\n                    disabled={!this.props.changed || this.props.error}\n                    onClick={() => this.props.onSave(true)}\n                    style={{ ...buttonStyle, ...{ marginLeft: 10 } }}\n                >\n                    <IconSave style={!noTextOnButtons ? styles.buttonIcon : undefined} />\n                    {!noTextOnButtons ? I18n.t('ra_Save and close') : '+'}\n                    {noTextOnButtons && <IconClose />}\n                </Fab>\n                <div style={{ flexGrow: 1 }} />\n                <Fab\n                    variant=\"extended\"\n                    aria-label=\"Close\"\n                    onClick={() => this.props.onClose()}\n                    style={buttonStyle}\n                >\n                    <IconClose style={!noTextOnButtons ? styles.buttonIcon : undefined} />\n                    {!noTextOnButtons && I18n.t('ra_Close')}\n                </Fab>\n            </Toolbar>\n        );\n    }\n}\n"]}