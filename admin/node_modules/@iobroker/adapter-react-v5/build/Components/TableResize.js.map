{"version":3,"file":"TableResize.js","sourceRoot":"./src/","sources":["Components/TableResize.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright 2022-2024, Denis Haev <dogafox@gmail.com>\n *\n * MIT License\n *\n */\nimport React, { Component } from 'react';\n\nimport { Table, Skeleton } from '@mui/material';\n\ninterface TableResizeProps {\n    name?: string;\n    ready?: boolean;\n    stickyHeader?: boolean;\n    size?: 'small' | 'medium';\n    className?: string;\n    sx?: Record<string, any>;\n    style?: React.CSSProperties;\n    initialWidths?: (number | 'auto')[];\n    minWidths?: number[];\n    dblTitle?: string;\n    children?: React.ReactNode;\n}\n\nexport class TableResize extends Component<TableResizeProps> {\n    private readonly resizerRefTable: React.RefObject<HTMLTableElement>;\n\n    private resizerActiveIndex: number | null;\n\n    private resizerActiveDiv: HTMLDivElement | null;\n\n    private resizerCurrentWidths: (number | 'auto')[];\n\n    private widthFilled: boolean = false;\n\n    private installTimeout: ReturnType<typeof setTimeout> | null = null;\n\n    private resizerMin: number = 0;\n\n    private resizerMinNext: number = 0;\n\n    private resizerPosition: number = 0;\n\n    private resizerOldWidth: number = 0;\n\n    private resizerOldWidthNext: number = 0;\n\n    constructor(props: TableResizeProps) {\n        super(props);\n        this.resizerRefTable = React.createRef();\n        this.resizerActiveIndex = null;\n        this.resizerActiveDiv = null;\n        this.resizerCurrentWidths = [];\n    }\n\n    componentDidMount(): void {\n        this.resizerInstall();\n    }\n\n    componentWillUnmount(): void {\n        this.resizerUninstall();\n    }\n\n    resizerInstall(): void {\n        if (this.resizerRefTable.current && !(this.resizerRefTable.current as any)._installed) {\n            (this.resizerRefTable.current as any)._installed = true;\n            const ths = this.resizerRefTable.current.querySelectorAll('th');\n\n            const widthsStored = ((window as any)._localStorage || window.localStorage).getItem(\n                `App.${this.props.name || 'history'}.table`,\n            );\n            this.widthFilled = false;\n\n            if (widthsStored) {\n                try {\n                    this.resizerCurrentWidths = JSON.parse(widthsStored);\n                    this.widthFilled = true;\n                } catch {\n                    // ignore\n                }\n            }\n            if (this.widthFilled) {\n                if (this.resizerCurrentWidths.length !== ths.length) {\n                    this.resizerCurrentWidths = [];\n                    this.widthFilled = false;\n                } else {\n                    const tableWidth = this.resizerRefTable.current.offsetWidth;\n                    let storedWidth: number | null = 0;\n                    for (let w = 0; w < this.resizerCurrentWidths.length; w++) {\n                        if (window.isFinite(this.resizerCurrentWidths[w] as number)) {\n                            storedWidth += this.resizerCurrentWidths[w] as number;\n                        } else {\n                            storedWidth = null;\n                            break;\n                        }\n                    }\n                    if (storedWidth !== null && Math.abs(storedWidth - tableWidth) > 20) {\n                        this.resizerCurrentWidths = [];\n                        this.widthFilled = false;\n                    }\n                }\n            }\n\n            for (let i = 0; i < ths.length; i++) {\n                !this.widthFilled && this.resizerCurrentWidths.push(ths[i].offsetWidth);\n\n                // last column does need a handle\n                if (i < ths.length - 1) {\n                    const div = window.document.createElement('div');\n                    div.dataset.index = i.toString();\n                    div.onmousedown = this.resizerMouseDown;\n                    div.ondblclick = this.resizerReset;\n                    div.title = this.props.dblTitle || 'Double click to reset table layout';\n                    div.className = 'resize-handle';\n                    ths[i].appendChild(div);\n                }\n            }\n            if (this.widthFilled) {\n                this.resizerApplyWidths();\n            }\n        } else {\n            this.installTimeout = setTimeout(() => {\n                this.installTimeout = null;\n                this.resizerInstall();\n            }, 100);\n        }\n    }\n\n    resizerReset = (): void => {\n        for (let c = 0; c < this.resizerCurrentWidths.length; c++) {\n            this.resizerCurrentWidths[c] = (this.props.initialWidths || [])[c] || 'auto';\n        }\n\n        ((window as any)._localStorage || window.localStorage).setItem(\n            `App.${this.props.name || 'history'}.table`,\n            JSON.stringify(this.resizerCurrentWidths),\n        );\n        this.resizerApplyWidths();\n    };\n\n    resizerUninstall(): void {\n        this.installTimeout && clearTimeout(this.installTimeout);\n        this.installTimeout = null;\n\n        // resizer\n        if (this.resizerRefTable.current && (this.resizerRefTable.current as any)._installed) {\n            (this.resizerRefTable.current as any)._installed = false;\n            const ths = this.resizerRefTable.current.querySelectorAll('th');\n            for (let i = 0; i < ths.length; i++) {\n                const div: HTMLDivElement | null = ths[i].querySelector('.resize-handle');\n                if (div) {\n                    div.onmousedown = null;\n                    div.remove();\n                }\n            }\n        }\n    }\n\n    resizerApplyWidths(): string | undefined {\n        const gridTemplateColumns: string[] = [];\n        if (this.resizerCurrentWidths.length) {\n            for (let c = 0; c < this.resizerCurrentWidths.length; c++) {\n                if (this.resizerCurrentWidths[c]) {\n                    gridTemplateColumns.push(\n                        this.resizerCurrentWidths[c] !== 'auto' ? `${this.resizerCurrentWidths[c]}px` : 'auto',\n                    );\n                } else if (this.props.initialWidths && this.props.initialWidths[c]) {\n                    gridTemplateColumns.push(\n                        this.props.initialWidths[c] !== 'auto' ? `${this.props.initialWidths[c]}px` : 'auto',\n                    );\n                } else {\n                    gridTemplateColumns.push('auto');\n                }\n            }\n        } else if (this.props.initialWidths) {\n            for (let c = 0; c < this.props.initialWidths.length; c++) {\n                if (this.props.initialWidths[c]) {\n                    gridTemplateColumns.push(\n                        this.props.initialWidths[c] !== 'auto' ? `${this.props.initialWidths[c]}px` : 'auto',\n                    );\n                } else {\n                    gridTemplateColumns.push('auto');\n                }\n            }\n        }\n\n        if (this.resizerRefTable.current && gridTemplateColumns.length) {\n            this.resizerRefTable.current.style.gridTemplateColumns = gridTemplateColumns.join(' ');\n        }\n\n        return gridTemplateColumns.length ? gridTemplateColumns.join(' ') : undefined;\n    }\n\n    resizerMouseMove = (e: MouseEvent): void => {\n        if (this.resizerActiveDiv && this.resizerActiveIndex !== null) {\n            const width = this.resizerOldWidth + e.clientX - this.resizerPosition;\n            const widthNext = this.resizerOldWidthNext - e.clientX + this.resizerPosition;\n            if (\n                (!this.resizerMin || width > this.resizerMin) &&\n                (!this.resizerMinNext || widthNext > this.resizerMinNext)\n            ) {\n                this.resizerCurrentWidths[this.resizerActiveIndex] = width;\n                this.resizerCurrentWidths[this.resizerActiveIndex + 1] = widthNext;\n                this.resizerApplyWidths();\n            }\n        }\n    };\n\n    resizerMouseUp = (): void => {\n        ((window as any)._localStorage || window.localStorage).setItem(\n            `App.${this.props.name || 'history'}.table`,\n            JSON.stringify(this.resizerCurrentWidths),\n        );\n\n        this.resizerActiveIndex = null;\n        this.resizerActiveDiv = null;\n        window.removeEventListener('mousemove', this.resizerMouseMove);\n        window.removeEventListener('mouseup', this.resizerMouseUp);\n    };\n\n    resizerMouseDown = (e: MouseEvent): void => {\n        if (this.resizerActiveIndex === null || this.resizerActiveIndex === undefined) {\n            console.log(`Mouse down ${(e.target as HTMLDivElement)?.dataset.index}`);\n            this.resizerActiveIndex = parseInt((e.target as HTMLDivElement)?.dataset.index || '0', 10);\n            this.resizerActiveDiv = e.target as HTMLDivElement;\n            this.resizerMin = this.props.minWidths ? this.props.minWidths[this.resizerActiveIndex] : 0;\n            this.resizerMinNext = this.props.minWidths ? this.props.minWidths[this.resizerActiveIndex + 1] : 0;\n            this.resizerPosition = e.clientX;\n            let ths;\n            if (this.resizerCurrentWidths[this.resizerActiveIndex] === 'auto') {\n                ths = this.resizerRefTable.current?.querySelectorAll('th');\n                if (ths) {\n                    this.resizerCurrentWidths[this.resizerActiveIndex] = ths[this.resizerActiveIndex].offsetWidth;\n                }\n            }\n            if (this.resizerCurrentWidths[this.resizerActiveIndex + 1] === 'auto') {\n                ths = ths || this.resizerRefTable.current?.querySelectorAll('th');\n                if (ths) {\n                    this.resizerCurrentWidths[this.resizerActiveIndex + 1] =\n                        ths[this.resizerActiveIndex + 1].offsetWidth;\n                }\n            }\n\n            this.resizerOldWidth = this.resizerCurrentWidths[this.resizerActiveIndex] as number;\n            this.resizerOldWidthNext = this.resizerCurrentWidths[this.resizerActiveIndex + 1] as number;\n\n            window.addEventListener('mousemove', this.resizerMouseMove);\n            window.addEventListener('mouseup', this.resizerMouseUp);\n        }\n    };\n\n    render(): React.JSX.Element {\n        if (this.props.ready === false) {\n            return <Skeleton />;\n        }\n\n        const style = { gridTemplateColumns: this.resizerApplyWidths() };\n\n        return (\n            <Table\n                stickyHeader={this.props.stickyHeader}\n                size={this.props.size || 'small'}\n                className={this.props.className}\n                sx={this.props.sx}\n                ref={this.resizerRefTable}\n                style={{ ...(this.props.style || undefined), ...style }}\n            >\n                {this.props.children}\n            </Table>\n        );\n    }\n}\n"]}