{"version":3,"file":"modulefederation.admin.config.js","sourceRoot":"./src/","sources":["modulefederation.admin.config.ts"],"names":[],"mappings":"AAAA,MAAM,UAAU,GAAG,CAAC,IAAc,EAA6D,EAAE;IAC7F,MAAM,MAAM,GAA8D,EAAE,CAAC;IAC7E,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;QACvB,MAAM,CAAC,WAAW,CAAC,GAAG;YAClB,eAAe,EAAE,GAAG;YACpB,SAAS,EAAE,IAAI;SAClB,CAAC;IACN,CAAC,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAClB,CAAC,CAAC;AAEF;;;;;GAKG;AACH,MAAM,UAAU,sBAAsB,CAClC,WAKc;IAEd,MAAM,IAAI,GAAa;QACnB,gBAAgB;QAChB,iBAAiB;QACjB,4BAA4B;QAC5B,uBAAuB;QACvB,6BAA6B;QAC7B,qBAAqB;QACrB,eAAe;QACf,qBAAqB;QACrB,UAAU;QACV,iBAAiB;QACjB,SAAS;QACT,mBAAmB;QACnB,OAAO;QACP,WAAW;QACX,WAAW;QACX,gBAAgB;QAChB,QAAQ;KACX,CAAC;IAEF,IAAI,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC;QAC7B,OAAO,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,IAAI,WAAW,IAAI,CAAC,WAAW,CAAC,YAAY,IAAI,WAAW,CAAC,eAAe,CAAC,EAAE,CAAC;QAC3E,OAAO,UAAU,CACb,IAAI,CAAC,MAAM,CACP,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,WAAW,CAAC,IAAI,WAAW,CAAC,eAAe,EAAE,CAAC,WAAW,CAAC,CACvG,CACJ,CAAC;IACN,CAAC;IAED,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;AAC5B,CAAC","sourcesContent":["const makeShared = (pkgs: string[]): Record<string, { requiredVersion: '*'; singleton: true }> => {\n    const result: Record<string, { requiredVersion: '*'; singleton: true }> = {};\n    pkgs.forEach(packageName => {\n        result[packageName] = {\n            requiredVersion: '*',\n            singleton: true,\n        };\n    });\n    return result;\n};\n\n/**\n * Admin shares these modules for all components\n *\n * @param packageJson - package.json or list of modules that used in component\n * @returns Object with shared modules for \"federation\"\n */\nexport function moduleFederationShared(\n    packageJson?:\n        | {\n              dependencies: Record<string, string>;\n              devDependencies?: Record<string, string>;\n          }\n        | string[],\n): Record<string, { requiredVersion: '*'; singleton: true }> {\n    const list: string[] = [\n        '@emotion/react',\n        '@emotion/styled',\n        '@iobroker/adapter-react-v5',\n        '@iobroker/json-config',\n        '@iobroker/dm-gui-components',\n        '@mui/icons-material',\n        '@mui/material',\n        '@mui/x-date-pickers',\n        'date-fns',\n        'date-fns/locale',\n        'leaflet',\n        'leaflet-geosearch',\n        'react',\n        'react-ace',\n        'react-dom',\n        'react-dropzone',\n        'semver',\n    ];\n\n    if (Array.isArray(packageJson)) {\n        return makeShared(list.filter(packageName => packageJson.includes(packageName)));\n    }\n\n    if (packageJson && (packageJson.dependencies || packageJson.devDependencies)) {\n        return makeShared(\n            list.filter(\n                packageName => packageJson.dependencies?.[packageName] || packageJson.devDependencies?.[packageName],\n            ),\n        );\n    }\n\n    return makeShared(list);\n}\n"]}